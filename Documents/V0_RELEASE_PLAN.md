# План релиза v0 (3 недели)

## Цель v0
Пользователь может:
1. зарегистрироваться;
2. загрузить анализы;
3. получить результат анализа;
4. позже вернуться и пересмотреть результат.

---

## Неделя 1 — Core backend

### Scope
- Auth: регистрация, вход, базовое управление сессией/токеном.
- Загрузка файлов анализов (валидация формата, размер, тип).
- Создание `job` на обработку после загрузки.
- Polling endpoint для статуса `job` (`queued / processing / done / failed`).
- Базовая БД-схема: `users`, `uploads`, `jobs`, `results`, `audit_logs` (минимум).
- Базовый UI:
  - экран upload;
  - экран статуса обработки.

### Demo (конец недели)
- **Happy path:** пользователь регистрируется → загружает файл → видит статус `processing` → `done`.
- **Failure path #1:** загрузка файла неподдерживаемого формата → понятная ошибка.
- **Failure path #2:** неавторизованный запрос на создание job → `401/403` и редирект на логин.

### Критерии готовности недели
- Есть сквозной поток от регистрации до статуса `done`.
- Все ошибки возвращаются с предсказуемыми кодами и сообщениями.

---

## Неделя 2 — Processing

### Scope
- Worker для фоновой обработки job.
- Parser v1 для входных анализов (минимальный стабильный набор полей).
- Нормализация фич для инференса.
- Inference API (вызов модели + возврат score/класса).
- Сохранение результата в БД (`results`).
- Экран результата в UI (score, краткая интерпретация, timestamp).

### Demo (конец недели)
- **Happy path:** валидный файл проходит pipeline → в UI появляется итоговый результат.
- **Failure path #1:** parser не смог распарсить файл → job в `failed` с объяснением причины.
- **Failure path #2:** модель/инференс недоступны → retry или controlled fail с логированием.

### Критерии готовности недели
- Любой успешный job оставляет персистентный результат.
- Пользователь может открыть страницу результата после завершения обработки.

---

## Неделя 3 — Stability + Analytics

### Scope
- Централизованный error handling (backend + worker).
- Retry-политики для транзиентных ошибок (очередь/инференс/IO).
- Audit logs по ключевым действиям пользователя и системе.
- Продуктовые события воронки:
  - signup;
  - upload_started / upload_success;
  - job_created;
  - result_viewed.
- Дашборд latency/error:
  - p50/p95 времени обработки;
  - error rate;
  - доля `failed jobs`.

### Demo (конец недели)
- **Happy path:** end-to-end сценарий стабильно проходит под умеренной нагрузкой.
- **Failure path #1:** временный сбой downstream-сервиса → job ретраится и восстанавливается.
- **Failure path #2:** неретраибельная ошибка → корректный `failed`, событие в аналитике, запись в audit log.

### Критерии готовности недели
- Ошибки наблюдаемы и диагностируемы через логи/метрики.
- Есть минимальная продуктовая аналитика по воронке.

---

## Definition of Done для релиза v0

Релиз v0 считается готовым, если одновременно выполнено:
- Пользователь может зарегистрироваться и войти.
- Пользователь может загрузить анализы и запустить обработку.
- Пользователь получает результат после завершения job.
- Пользователь может вернуться позже и пересмотреть ранее сохранённый результат.
- Для критичных шагов есть понятные ошибки и трассируемость (audit/event logs).
- Демо-сценарии (1 happy + 2 failure) задокументированы и воспроизводимы для каждой недели.
